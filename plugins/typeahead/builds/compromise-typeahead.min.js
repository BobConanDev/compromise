!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).compromiseTypeahead=t()}(this,(function(){"use strict";var e=function(e,t){let o=e.world;o.prefixes=o.prefixes||{};let r=e.last().terms().last(),i=r.json({terms:{normal:!0}});if(i[0]&&i[0].terms&&(i=i[0].terms[0],!i.post&&o.prefixes.hasOwnProperty(i.normal))){let e=o.prefixes[i.normal];r.termList()[0].implicit=e,r.termList()[0].typeAhead=!0,t.hasOwnProperty(e)&&r.tag(t[e],"typeahead")}};var t=function(e,t,o){let r={},i=[],s=o.prefixes||{};return e.forEach((e=>{let a=(e=e.toLowerCase().trim()).length;t.max&&a>t.max&&(a=t.max);for(let n=t.min;n<a;n+=1){let a=e.substr(0,n);t.safe&&o.words.hasOwnProperty(a)||(!0!==s.hasOwnProperty(a)&&!0!==r.hasOwnProperty(a)?r[a]=e:i.push(a))}})),r=Object.assign({},s,r),i.forEach((e=>{delete r[e]})),r};const o={safe:!0,min:3};return function(r,i,s){s.typeahead=function(r=[],s={}){let a={};var n;s=Object.assign({},o,s),(n=r)&&"[object Object]"===Object.prototype.toString.call(n)&&(a=r,r=Object.keys(a)),i.prefixes=t(r,s,i),i.postProcess((t=>{e(t,a)}))},r.prototype.autoFill=function(){this.termList().forEach((e=>{!0===e.typeAhead&&e.implicit&&(e.set(e.implicit),e.implicit=null,e.typeAhead=void 0)}))},s.typeAhead=r.prototype.typeahead}}));
