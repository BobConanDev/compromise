!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).compromiseTypeahead=t()}(this,(function(){"use strict";var e=function(e,t){var r=e.world;r.prefixes=r.prefixes||{};var o=e.last().terms().last(),n=o.json({terms:{normal:!0}});if(n[0]&&n[0].terms&&!(n=n[0].terms[0]).post&&r.prefixes.hasOwnProperty(n.normal)){var s=r.prefixes[n.normal];o.termList()[0].implicit=s,t.hasOwnProperty(s)&&o.tag(t[s],"typeahead")}},t=function(e,t,r){var o={},n=[],s=r.prefixes||{};return e.forEach((function(e){var a=(e=e.toLowerCase().trim()).length;t.max&&a>t.max&&(a=t.max);for(var i=t.min;i<a;i+=1){var f=e.substr(0,i);t.safe&&r.words.hasOwnProperty(f)||(!0!==s.hasOwnProperty(f)&&!0!==o.hasOwnProperty(f)?o[f]=e:n.push(f))}})),o=Object.assign({},s,o),n.forEach((function(e){delete o[e]})),o},r=function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},o={safe:!0,min:3};return function(n,s,a){a.typeahead=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};a=Object.assign({},o,a),r(n)&&(i=n,n=Object.keys(i)),s.prefixes=t(n,a,s),s.postProcess((function(t){e(t,i)}))},a.typeAhead=n.prototype.typeahead}}));
