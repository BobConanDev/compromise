var e,t;e=this,t=function(e,t){function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(t);const s={highWaterMark:64};var r={lib:{streamFile:function(e,t,n){const r=this;return n=Object.assign({},s,n),new Promise((s,c)=>{let i=r.model();const l=r.methods().one.tokenize.splitSentences,u=o.createReadStream(e,n);let a="",f=[];const d=e=>{let n=t(r(e));n&&n.found&&f.push(n.document[0])};u.on("data",(function(e){a+=e;let t=l(a,i);a=t.pop(),t.forEach(d)})),u.on("end",(function(){d(a);let e=r("");e.document=f,s(e)})),u.on("error",(function(e){console.error(e.stack),c(e)}))})}}};let c={};var i={lib:{keyPress:function(e,t,n={}){const o=this;let s=(0,this.methods().one.tokenize.splitSentences)(e,this.model()),r=[];return s.forEach(e=>{if(!0===c.hasOwnProperty(e))r.push(c[e].data),c[e].used=!0;else{n.verbose&&console.log(`parsing: '${e}'\n`);let s=o(e,t).json(0);c[e]={data:s,used:!0},r.push(s)}}),Object.keys(c).forEach(e=>{!0!==c[e].used?delete c[e]:c[e].used=null}),n.verbose&&console.log(Object.keys(c).length+"' sentences in cache\n"),o(r)}}};e.keyPress=i,e.streamFile=r,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("fs")):"function"==typeof define&&define.amd?define(["exports","fs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).compromiseSpeed={},e.fs);
