{"version":3,"file":"compromise-html.js","sources":["../node_modules/htm/dist/htm.module.js","../src/html.js","../src/index.js"],"sourcesContent":["var n=function(t,r,u,e){for(var p=1;p<r.length;p++){var s=r[p],h=\"number\"==typeof s?u[s]:s,a=r[++p];1===a?e[0]=h:3===a?e[1]=Object.assign(e[1]||{},h):5===a?(e[1]=e[1]||{})[r[++p]]=h:6===a?e[1][r[++p]]+=h+\"\":e.push(a?t.apply(null,n(t,h,u,[\"\",null])):h)}return e},t=function(n){for(var t,r,u=1,e=\"\",p=\"\",s=[0],h=function(n){1===u&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?s.push(n||e,0):3===u&&(n||e)?(s.push(n||e,1),u=2):2===u&&\"...\"===e&&n?s.push(n,3):2===u&&e&&!n?s.push(!0,5,e):u>=5&&((e||!n&&5===u)&&(s.push(e,u,r),u=6),n&&(s.push(n,u,r),u=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===u&&h(),h(a));for(var f=0;f<n[a].length;f++)t=n[a][f],1===u?\"<\"===t?(h(),s=[s],u=3):e+=t:4===u?\"--\"===e&&\">\"===t?(u=1,e=\"\"):e=t+e[0]:p?t===p?p=\"\":e+=t:'\"'===t||\"'\"===t?p=t:\">\"===t?(h(),u=1):u&&(\"=\"===t?(u=5,r=e,e=\"\"):\"/\"===t&&(u<5||\">\"===n[a][f+1])?(h(),3===u&&(s=s[0]),u=s,(s=s[0]).push(u,2),u=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(h(),u=2):e+=t),3===u&&\"!--\"===e&&(u=4,s=s[0])}return h(),s},r=\"function\"==typeof Map,u=r?new Map:{},e=r?function(n){var r=u.get(n);return r||u.set(n,r=t(n)),r}:function(n){for(var r=\"\",e=0;e<n.length;e++)r+=n[e].length+\"-\"+n[e];return u[r]||(u[r]=t(n))};export default function(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}\n","const htm = require('htm')\nconst vhtml = require('vhtml')\n\nconst toHtml = function(doc, segments, options) {\n  let h = htm.bind(vhtml)\n  if (options.bind) {\n    h = htm.bind(options.bind)\n  }\n  let html = []\n  let arr = doc.segment(segments)\n  arr.forEach(o => {\n    let str = h`<span class=${o.segment}>${o.text}</span>`\n    html.push(str)\n  })\n  return h`<pre>${html}</pre>`\n}\nmodule.exports = toHtml\n","const toHtml = require('./html')\n\nconst addMethods = function(Doc) {\n  /** generate sanitized html from the document */\n  Doc.prototype.html = function(segments = {}, options = {}) {\n    return toHtml(this, segments, options)\n  }\n}\nmodule.exports = addMethods\n"],"names":["n","t","r","u","e","p","length","s","h","a","Object","assign","push","apply","replace","f","Map","get","set","arguments","toHtml","doc","segments","options","htm","bind","vhtml","html","arr","segment","forEach","o","str","text","addMethods","Doc","prototype"],"mappings":"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"}