!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).compromiseHtml=n()}(this,(function(){"use strict";function e(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var n=function e(n,t,r,o){for(var u=1;u<t.length;u++){var f=t[u],i="number"==typeof f?r[f]:f,a=t[++u];1===a?o[0]=i:3===a?o[1]=Object.assign(o[1]||{},i):5===a?(o[1]=o[1]||{})[t[++u]]=i:6===a?o[1][t[++u]]+=i+"":o.push(a?n.apply(null,e(n,i,r,["",null])):i)}return o},t=function(e){for(var n,t,r=1,o="",u="",f=[0],i=function(e){1===r&&(e||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?f.push(e||o,0):3===r&&(e||o)?(f.push(e||o,1),r=2):2===r&&"..."===o&&e?f.push(e,3):2===r&&o&&!e?f.push(!0,5,o):r>=5&&((o||!e&&5===r)&&(f.push(o,r,t),r=6),e&&(f.push(e,r,t),r=6)),o=""},a=0;a<e.length;a++){a&&(1===r&&i(),i(a));for(var s=0;s<e[a].length;s++)n=e[a][s],1===r?"<"===n?(i(),f=[f],r=3):o+=n:4===r?"--"===o&&">"===n?(r=1,o=""):o=n+o[0]:u?n===u?u="":o+=n:'"'===n||"'"===n?u=n:">"===n?(i(),r=1):r&&("="===n?(r=5,t=o,o=""):"/"===n&&(r<5||">"===e[a][s+1])?(i(),3===r&&(f=f[0]),r=f,(f=f[0]).push(r,2),r=0):" "===n||"\t"===n||"\n"===n||"\r"===n?(i(),r=2):o+=n),3===r&&"!--"===o&&(r=4,f=f[0])}return i(),f},r="function"==typeof Map,o=r?new Map:{},u=r?function(e){var n=o.get(e);return n||o.set(e,n=t(e)),n}:function(e){for(var n="",r=0;r<e.length;r++)n+=e[r].length+"-"+e[r];return o[n]||(o[n]=t(e))};var f=Object.freeze({__proto__:null,default:function(e){var t=n(this,u(e),arguments,[]);return t.length>1?t:t[0]}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var i=function(e,n){return e(n={exports:{}},n.exports),n.exports}((function(e,n){var t,r,o,u,f,i;e.exports=(t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],r=function(e){return String(e).replace(/[&<>"']/g,(function(e){return"&"+o[e]+";"}))},o={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},u="dangerouslySetInnerHTML",f={className:"class",htmlFor:"for"},i={},function(e,n){var o=[],a="";n=n||{};for(var s=arguments.length;s-- >2;)o.push(arguments[s]);if("function"==typeof e)return n.children=o.reverse(),e(n);if(e){if(a+="<"+e,n)for(var l in n)!1!==n[l]&&null!=n[l]&&l!==u&&(a+=" "+(f[l]?f[l]:r(l))+'="'+r(n[l])+'"');a+=">"}if(-1===t.indexOf(e)){if(n[u])a+=n[u].__html;else for(;o.length;){var p=o.pop();if(p)if(p.pop)for(var c=p.length;c--;)o.push(p[c]);else a+=!0===i[p]?p:r(p)}a+=e?"</"+e+">":""}return i[a]=!0,a})})),a=function(e){return e&&e.default||e}(f);function s(){var n=e(["<pre>","</pre>"]);return s=function(){return n},n}function l(){var n=e(["<span class=",">","</span>"]);return l=function(){return n},n}var p=function(e,n,t){var r=a.bind(i);t.bind&&(r=a.bind(t.bind));var o=[];return e.segment(n).forEach((function(e){var n=r(l(),e.segment,e.text);o.push(n)})),r(s(),o)};return function(e){e.prototype.html=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,e,n)}}}));
