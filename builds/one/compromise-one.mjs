var t={methods:{one:{},two:{},three:{}},model:{one:{},two:{},three:{}},compute:{},hooks:[]};const e=function(t,e){if(t[0]!==e[0])return!1;let r=t[1],n=e[1];return r<=n&&t[2]>=n||n<=r&&e[2]>=r},r=function(t){let e=t[0][1],r=t[0][2];return t.forEach(t=>{t[1]<e&&(e=t[1]),t[2]>r&&(r=t[2])}),[t[0][0],e,r]},n=function(t){let e={};return t.forEach(t=>{e[t[0]]=e[t[0]]||[],e[t[0]].push(t)}),e},o=function(t,o){let i=t.concat(o),s=n(i),u=[];return i.forEach(t=>{let[n]=t;if(1===s[n].length)return void u.push(t);let o=s[n].filter(r=>e(t,r));o.push(t);let i=r(o);u.push(i)}),u=function(t){let e={};for(let r=0;r<t.length;r+=1)e[t[r].join(",")]=t[r];return Object.values(e)}(u),u},i=function(t,e){let r=n(e),o=[];return t.forEach(t=>{let[e]=t,n=r[e]||[];if(n=n.filter(e=>function(t,e){return t[1]<=e[1]&&e[2]<=t[2]}(t,e)),0===n.length)return void o.push({passthrough:t});n=n.sort((t,e)=>t[1]-e[1]);let i=t;n.forEach((t,n)=>{let s=function(t,e){let[r,n]=t,o=e[1],i=e[2],s={};if(n<o){let e=o<t[2]?o:t[2];s.before=[r,n,e]}return s.match=e,t[2]>i&&(s.after=[r,i,t[2]]),s}(i,t);r[e][n+1]?(o.push({before:s.before,match:s.match}),s.after&&(i=s.after)):o.push(s)})}),o},s=function(t,e){let r=[];return i(t,e).forEach(t=>{t.passthrough&&r.push(t.passthrough),t.before&&r.push(t.before),t.after&&r.push(t.after)}),r},u={fork:function(){return this},remove:function(t){let e=this,r=this.fullPointer;t&&(e=this.match(t));let o=e.document,i=[],u=e.fullPointer.reverse();u.forEach(t=>{let[e,r,n]=t,s=n-r;i.push([e,r,r+s]),n===o[e].length&&n>1&&function(t,e){let r=t.length-1,n=t[r],o=t[r-e];o&&n&&(o.post+=n.post,o.post=o.post.replace(/ +([.?!])/,"$1"))}(o[e],s),o[e].splice(r,s)});let l=s(r,i.reverse());this.document=o.filter((t,e)=>{if(t.length>0)return!0;for(let t=0;t<l.length;t+=1)l[t][0]>e&&(l[t][0]-=1);return!1});let a=n(l);return u.forEach(t=>{let[e]=t;(a[e]||[]).forEach(e=>{if(e[1]>t[1]){let r=t[2]-t[1];e[1]-=r,e[2]-=r}})}),this.ptrs=l,this.update(l)}};u.delete=u.remove;const l={compute:function(t){const{docs:e,world:r}=this,n=r.compute;return"string"==typeof t&&n.hasOwnProperty(t)?n[t](e,r):(t=>"[object Array]"===Object.prototype.toString.call(t))(t)?t.forEach(t=>r.compute.hasOwnProperty(t)&&n[t](e,r)):"function"==typeof t?t(this.docs,r):console.warn("no compute:",t),this}},a=(t,e,r)=>{let n=[e,0].concat(r);return Array.prototype.splice.apply(t,n),t},c=function(t){let e=t[t.length-1];!1===/ $/.test(e.post)&&(e.post+=" ")},h=(t,e,r)=>{const n=/[.?!]/g;let o=t[e-1],i=o.post;if(n.test(i)){let t=i.match(n).join(""),e=r[r.length-1];e.post=t+e.post+" ",o.post=o.post.replace(n,"")}},f=function(t){return/^[A-Z][a-z'\u00C0-\u00FF]/.test(t)||/^[A-Z]$/.test(t)},p=function(t,e,r,n){let[o,i,s]=e;0===i?c(r):s===n[o].length?c(t):(c(r),c([t[e[1]]])),function(t,e,r){let n=t[e];if(0!==e||!f(n.text))return;r[0].text=r[0].text.replace(/^[a-z\u00C0-\u00FF]/,t=>t.toUpperCase());let o=t[e];o.tags.has("ProperNoun")||o.tags.has("Acronym")||f(o.text)&&o.text.length>1&&(o.text=o.text.replace(/^[A-Z]/,t=>t.toLowerCase()))}(t,i,r),h(t,s,r),a(t,i,r)},g=function(t,e,r){const{methods:n,document:o,world:i}=e;let s=e.fullPointer;s.forEach(e=>{let[s]=e,u=o[s],l=n.one.tokenize(t,i)[0];r?p(u,e,l,o):function(t,e,r,n){let[o,,i]=e,s=n[o].length;i<s?c(r):s===i&&(c(t),h(t,i,r)),a(t,e[2],r)}(u,e,l,o),e[2]+=l.length}),s=s.map(t=>[t[0]]);let u=e.update(s);return u.compute(["preTagger","contractions","postTagger"]),u},m={insertAfter:function(t){return g(t,this,!1)},insertBefore:function(t){return g(t,this,!0)},concat:function(t){const{methods:e,document:r,world:n}=this;if("string"==typeof t){let o=e.one.tokenize(t,n),i=this.fullPointer,s=i[i.length-1][0];return a(r,s+1,o),this}if(this.document===t.document){let e=this.fullPointer.concat(t.fullPointer);return this.update(e)}return this}};m.append=m.insertAfter,m.prepend=m.insertBefore,m.insert=m.insertAfter;var d={forEach:function(t){return this.fullPointer.forEach((e,r)=>{let n=this.update([e]);t(n,r)}),this},map:function(t){let e=this.fullPointer.map((e,r)=>{let n=this.update([e]);return t(n,r)});if(0===e.length)return this.update([]);if(e[0]&&"object"==typeof e[0]&&!e[0].isView)return e;let r=[];return e.forEach(t=>{r=r.concat(t.fullPointer)}),this.update(r)},filter:function(t){let e=this.fullPointer;return e=e.filter((e,r)=>{let n=this.update([e]);return t(n,r)}),this.update(e)},find:function(t){let e=this.fullPointer.find((e,r)=>{let n=this.update([e]);return t(n,r)});return this.update([e])},some:function(t){return this.fullPointer.some((e,r)=>{let n=this.update([e]);return t(n,r)})},random:function(t=1){let e=this.fullPointer,r=Math.floor(Math.random()*e.length);return r+t>this.length&&(r=this.length-t,r=r<0?0:r),e=e.slice(r,r+t),this.update(e)}};const b=function(t,e){return e?(t.forEach(t=>{let r=t[0];e[r]&&(t[0]=e[r][0],t[1]+=e[r][1],t[2]+=e[r][1])}),t):t},y=function(t,e){let{ptrs:r,byGroup:n}=t;return r=b(r,e),Object.keys(n).forEach(t=>{n[t]=b(n[t],e)}),{ptrs:r,byGroup:n}},w=t=>t&&"object"==typeof t&&!0===t.isView;var v={matchOne:function(t="",e){const r=this.methods.one;if(w(t)){let e=t.fullPointer;return this.update(e)}"string"==typeof t&&(t=r.parseMatch(t));let n={regs:t,group:e,justOne:!0},o=r.match(this.docs,n,this._cache),{ptrs:i,byGroup:s}=y(o,this.pointer),u=this.update(i);return u._groups=s,u},match:function(t,e){const r=this.methods.one;if(w(t)){let e=t.fullPointer;return this.update(e)}"string"==typeof t&&(t=r.parseMatch(t));let n={regs:t,group:e},o=r.match(this.docs,n,this._cache),{ptrs:i,byGroup:s}=y(o,this.pointer),u=this.update(i);return u._groups=s,u},has:function(t="",e){const r=this.methods.one;let n;if("string"==typeof t){let o={regs:t=r.parseMatch(t),group:e,justOne:!0};n=r.match(this.docs,o,this._cache).ptrs}else w(t)&&(n=t.fullPointer);return n.length>0},if:function(t,e){const r=this.methods.one;if("string"==typeof t){let n={regs:t=r.parseMatch(t),group:e,justOne:!0},o=this.fullPointer;return o=o.filter(t=>{let e=this.update([t]);return r.match(e.docs,n,this._cache).ptrs.length>0}),this.update(o)}if(w(t)){let e=t.fullPointer;return this.update(e)}return this.none()},ifNo:function(t,e){const{docs:r,methods:n,_cache:o}=this,i=n.one;let s;if("string"==typeof t){let n={regs:t=i.parseMatch(t),group:e};s=i.match(r,n,o).ptrs}else w(t)&&(s=t.fullPointer);let u=new Set(s.map(t=>t[0])),l=[];for(let t=0;t<r.length;t+=1)!1===u.has(t)&&l.push([t]);return this.update(l)}};const E={green:"#7f9c6c",red:"#914045",blue:"#6699cc",magenta:"#6D5685",cyan:"#2D85A8",yellow:"#e6d7b3",black:"#303b50"},x={green:t=>"[32m"+t+"[0m",red:t=>"[31m"+t+"[0m",blue:t=>"[34m"+t+"[0m",magenta:t=>"[35m"+t+"[0m",cyan:t=>"[36m"+t+"[0m",yellow:t=>"[33m"+t+"[0m",black:t=>"[30m"+t+"[0m",dim:t=>"[2m"+t+"[0m",i:t=>"[3m"+t+"[0m"},j=function(t){let{docs:e,model:r}=t;0===e.length&&console.log(x.blue("\n     ──────")),e.forEach(t=>{console.log(x.blue("\n  ┌─────────")),t.forEach(t=>{let e=[...t.tags||[]],n=t.text||"-";t.implicit&&(n="["+t.implicit+"]"),void 0!==typeof module&&(n=x.yellow(n));let o="'"+n+"'";o=o.padEnd(18);let i=x.blue("  │ ")+x.i(o)+"  - "+function(t,e){return e.two.tagSet&&(t=t.map(t=>{if(!e.two.tagSet.hasOwnProperty(t))return t;const r=e.two.tagSet[t].color||"blue";return x[r](t)})),t.join(", ")}(e,r);console.log(i)})})},k=function(t){if(!t.found)return;let e={};t.fullPointer.forEach(t=>{e[t[0]]=e[t[0]]||[],e[t[0]].push(t)}),Object.keys(e).forEach(r=>{let n=t.update([[Number(r)]]).text();t.update(e[r]).json({offset:!0}).forEach((t,e)=>{n=function(t,e,r){let n=((t,e,r)=>{let n=9*r,o=e.start+n,i=o+e.length;return[t.substring(0,o),t.substring(o,i),t.substring(i,t.length)]})(t,e,r);return`${n[0]}${x.blue(n[1])}${n[2]}`}(n,t.offset,e)}),console.log(n)})};const P=/[,:;).?!—-]+/,O=/^[('"]+/,z=/[,:;)('"]/,_=/^[-–—]$/,$=function(t,e,r=!0){let n="";return t.forEach(t=>{let r=t.pre||"",o=t.post||"";"some"===e.punctuation&&(r=r.replace(O,""),_.test(o)&&(o=" "),o=o.replace(z,"")),"some"===e.whitespcae&&(r=r.replace(/\s/,""),o=o.replace(/\s+/," ")),!1===e.keepPunct&&(r=r.replace(O,""),o=o.replace(P,""));let i=t[e.use||"text"]||t.text||"";n+=r+i+o}),!1===r&&(n=n.trim()),!0===e.lowerCase&&(n=n.toLowerCase()),n},A={text:!0,terms:!0},S=function(t,e){return"string"==typeof(e=e||{})&&(e={}),e=Object.assign({},A,e),t.docs.map(t=>{let r={};if(e.text&&(r.text=$(t,{},!1)),e.normal&&(r.normal=$(t,{use:"normal"},!1)),e.terms&&(r.terms=function(t){return t.map(t=>{let e=Object.assign({},t);return e.tags=Array.from(t.tags),e})}(t)),e.offset){t[0].offset;let e=r.text.length;r.offset={index:t[0].offset.index,start:t[0].offset.start,length:e}}return r})},C={text:{use:"text"},normal:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",use:"normal"},machine:{whitespace:"some",punctuation:"some",case:"none",unicode:"some",use:"machine"},root:{whitespace:"some",punctuation:"some",case:"some",unicode:"some",use:"normal"}};C.clean=C.normal,C.reduced=C.root;const F={json:function(t){let e=S(this,t);return"number"==typeof t?e[t]:e},text:function(t){let e={keepSpace:!0,keepPunct:!0};var r;if(t&&"string"==typeof t&&C.hasOwnProperty(t)?e=Object.assign({},C[t]):t&&(r=t,"[object Object]"===Object.prototype.toString.call(r))&&(e=Object.assign({},t,e)),this.pointer){e.keepSpace=!1;let t=this.pointer[0];t&&t[1]&&(e.keepPunct=!1)}return function(t,e){let r="";for(let n=0;n<t.length;n+=1)r+=$(t[n],e,!0);return e.keepSpace||(r=r.trim()),!1===e.keepPunct&&(r=r.replace(O,""),r=r.replace(P,"")),!0===e.cleanWhitespace&&(r=r.trim()),r}(this.docs,e)},debug:function(t={}){let e=this;if("string"==typeof t){let e={};e[t]=!0,t=e}return"undefined"!=typeof window&&window.document?(function(t){let e=t.world.tags;t.forEach(t=>{t.forEach(t=>{let r=Array.from(t.tags),n=t.text||"-";t.implicit&&(n="["+t.implicit+"]");let o="'"+n+"'";o=o.padEnd(8);let i=r.find(t=>e[t]&&e[t].color),s="steelblue";e[i]&&(s=e[i].color,s=E[s]),console.log(`   ${o}  -  %c${r.join(", ")}`,`color: ${s||"steelblue"};`)})})}(e),e):(!1!==t.tags&&(j(e),console.log("\n")),!0===t.chunks&&(!function(t){let{docs:e}=t;console.log(""),e.forEach(t=>{let e=[];t.forEach(t=>{"Noun"===t.chunk?e.push(x.blue(t.implicit||t.normal)):"Verb"===t.chunk?e.push(x.green(t.implicit||t.normal)):"Adjective"===t.chunk?e.push(x.yellow(t.implicit||t.normal)):"Pivot"===t.chunk?e.push(x.red(t.implicit||t.normal)):e.push(t.implicit||t.normal)}),console.log(e.join(" "),"\n")})}(e),console.log("\n")),!0===t.highlight&&(k(e),console.log("\n")),e)},out:function(t){if("text"===t)return this.text();if("normal"===t)return this.text("normal");if("machine"===t||"reduced"===t)return this.text("machine");if("json"===t)return this.json();if("offset"===t||"offsets"===t)return this.compute("offset"),this.json({offset:!0});if("array"===t){return this.docs.map(t=>t.reduce((t,e)=>t+e.pre+e.text+e.post,"").trim()).filter(t=>t)}if("freq"===t||"frequency"===t||"topk"===t){return this.compute("freq").terms().unique().termList().sort((t,e)=>t.freq>e.freq?-1:0)}if("terms"===t){let t=[];return this.docs.forEach(e=>{let r=e.terms.map(t=>t.text);r=r.filter(t=>t),t=t.concat(r)}),t}return"tags"===t?this.docs.map(t=>t.reduce((t,e)=>(t[e.implicit||e.normal]=Array.from(e.tags),t),{})):"debug"===t?this.debug():this.text()}};F.data=F.json;const q={replaceWith:function(t){let e=this.fullPointer;this.insertAfter(t);let r=this.update(e);return this.delete(r),this.update(e)},replace:function(t,e){let r=this.match(t);return r.found?r.replaceWith(e):this}},B=(t,e)=>"string"==typeof t?e.match(t):t,G={union:function(t){t=B(t,this);let e=o(this.fullPointer,t.fullPointer);return this.update(e)}};G.and=G.union,G.intersection=function(t){t=B(t,this);let o=function(t,o){let i=n(o),s=[];return t.forEach(t=>{let n=i[t[0]]||[];if(n=n.filter(r=>e(t,r)),0===n.length)return;n=r(n);let o=function(t,e){let r=t[1]<e[1]?e[1]:t[1],n=t[2]>e[2]?e[2]:t[2];return r<n?[t[0],r,n]:null}(t,n);o&&s.push(o)}),s}(this.fullPointer,t.fullPointer);return this.update(o)},G.difference=function(t){t=B(t,this);let e=s(this.fullPointer,t.fullPointer);return this.update(e)},G.not=G.difference,G.complement=function(){let t=this.all(),e=s(t.fullPointer,this.fullPointer);return this.update(e)},G.settle=function(){let t=this.fullPointer;return t.forEach(e=>{t=o(t,[e])}),this.update(t)};var D={alpha:(t,e)=>t.normal<e.normal?-1:t.normal>e.normal?1:0,length:(t,e)=>{let r=t.normal.trim().length,n=e.normal.trim().length;return r<n?1:r>n?-1:0},wordCount:(t,e)=>t.words<e.words?1:t.words>e.words?-1:0,sequential:(t,e)=>{let r=t.pointer.join(""),n=e.pointer.join("");return r<n?1:r>n?-1:0},byFreq:function(t){let e={};return t.forEach(t=>{e[t.normal]=e[t.normal]||0,e[t.normal]+=1}),t.sort((t,r)=>{let n=e[t.normal],o=e[r.normal];return n<o?1:n>o?-1:0}),t}};const M=new Set(["index","sequence","seq","sequential","chron","chronological"]),L=new Set(["freq","frequency","topk","repeats"]);var T={unique:function(){let{docs:t,pointer:e}=this,r=e||t.map((t,e)=>[e]),n=new Set,o=new Set;return this.docs.forEach((t,e)=>{let r=t.map(t=>t.machine||t.normal).join(" ");n.has(r)&&o.add(e),n.add(r)}),r=r.filter((t,e)=>!1===o.has(e)),this.update(r)},reverse:function(){let t=this.pointer||this.docs.map((t,e)=>[e]);return t=[].concat(t),t=t.reverse(),this.update(t)},sort:function(t){let{docs:e,pointer:r}=this;t=t||"alpha";let n=r||e.map((t,e)=>[e]),o=e.map((t,e)=>({index:e,words:t.length,normal:t.map(t=>t.machine||t.normal||"").join(" "),pointer:n[e]}));return M.has(t)&&(t="sequential"),L.has(t)?(o=D.byFreq(o),this.update(o.map(t=>t.pointer))):"function"==typeof D[t]?(o=o.sort(D[t]),this.update(o.map(t=>t.pointer))):this}};const U=function(t,e){return[t[0],t[1],e[2]]},N=(t,e,r)=>"string"==typeof t?e.match(t,r):t,Z={splitOn:function(t,e){let r=N(t,this,e).fullPointer,n=i(this.fullPointer,r),o=[];return n.forEach(t=>{o.push(t.passthrough),o.push(t.before),o.push(t.match),o.push(t.after)}),o=o.filter(t=>t),this.update(o)},splitBefore:function(t,e){let r=N(t,this,e).fullPointer,n=i(this.fullPointer,r),o=[];return n.forEach(t=>{o.push(t.passthrough),o.push(t.before),t.match&&t.after?o.push(U(t.match,t.after)):(o.push(t.match),o.push(t.after))}),o=o.filter(t=>t),this.update(o)},splitAfter:function(t,e){let r=N(t,this,e).fullPointer,n=i(this.fullPointer,r),o=[];return n.forEach(t=>{o.push(t.passthrough),t.before&&t.match?o.push(U(t.before,t.match)):(o.push(t.before),o.push(t.match)),o.push(t.after)}),o=o.filter(t=>t),this.update(o)}};Z.split=Z.splitAfter;const W=function(t){return"[object Array]"===Object.prototype.toString.call(t)},Q={tag:function(t,e="",r){if(!this.found||!t)return this;let n=this.termList();if(0===n.length)return this;const{methods:o,verbose:i,world:s}=this;return!0===i&&console.log(" +  ",t,e||""),W(t)?t.forEach(t=>o.one.setTag(n,t,s,r)):o.one.setTag(n,t,s,r),this},tagSafe:function(t,e=""){return this.tag(t,e,!0)},unTag:function(t,e){if(!this.found||!t)return this;let r=this.termList();if(0===r.length)return this;const{methods:n,verbose:o,model:i}=this;!0===o&&console.log(" -  ",t,e||"");let s=i.two.tagSet;return W(t)?t.forEach(t=>n.one.unTag(r,t,s)):n.one.unTag(r,t,s),this},canBe:function(t){let e=this.model.two.tagSet;if(!e.hasOwnProperty(t))return this;let r=e[t].not||[],n=[];this.document.forEach((t,e)=>{t.forEach((t,o)=>{r.find(e=>t.tags.has(e))&&n.push([e,o,o+1])})});let o=this.update(n);return this.difference(o)}},H={termList:function(){return this.methods.one.termList(this.docs)},terms:function(t){let e=this.match(".");return"number"==typeof t?e.eq(t):e},cache:function(){return this._cache=this.methods.one.cacheDoc(this.document),this},uncache:function(){return this._cache=null,this},groups:function(t){if(t||0===t)return this.update(this._groups[t]||[]);let e={};return Object.keys(this._groups).forEach(t=>{e[t]=this.update(this._groups[t])}),e},eq:function(t){let e=this.pointer;return e||(e=this.docs.map((t,e)=>[e])),e[t]?this.update([e[t]]):this.none()},first:function(){return this.eq(0)},last:function(){let t=this.pointer.length-1;return this.eq(t)},slice:function(t,e){let r=this.pointer||this.docs.map((t,e)=>[e]);return r=r.slice(t,e),this.update(r)},all:function(){return this.update()},none:function(){return this.update([])},is:function(t){if(!t||!t.isView)return!1;let e=this.fullPointer,r=t.fullPointer;return!e.length!==r.length&&e.every((t,e)=>t[0]===r[e][0]&&t[1]===r[e][1]&&t[2]===r[e][2])},wordCount:function(){return this.docs.reduce((t,e)=>t+=e.filter(t=>""!==t.text).length,0)}};H.group=H.groups;var V={before:function(t,e){let r=[],o=n(this.fullPointer);Object.keys(o).forEach(t=>{let e=o[t].sort((t,e)=>t[1]>e[1]?1:-1)[0];e[1]>0&&r.push([e[0],0,e[1]])});let i=this.update(r);return t?i.match(t,e):i},after:function(t,e){let r=[],o=n(this.fullPointer),i=this.document;Object.keys(o).forEach(t=>{let e=o[t].sort((t,e)=>t[1]>e[1]?-1:1)[0],[n,,s]=e;s<i[n].length&&r.push([n,s,i[n].length])});let s=this.update(r);return t?s.match(t,e):s}};const I={pre:function(t,e){return void 0===t?this.docs[0][0].pre:(this.docs.forEach(r=>{let n=r[0];!0===e?n.pre+=t:n.pre=t}),this)},post:function(t,e){if(void 0===t){let t=this.docs[this.docs.length-1];return t[t.length-1].post}return this.docs.forEach(r=>{let n=r[0];!0===e?n.post+=t:n.post=t}),this},trim:function(){let t=this.docs;t[0][0].pre="";let e=t[t.length-1];return e[e.length-1].post="",this},hyphenate:function(){return this.docs.forEach(t=>{t.forEach((e,r)=>{0!==r&&(e.pre=""),t[r+1]&&(e.post="-")})}),this},dehyphenate:function(){const t=/[-–—]/;return this.docs.forEach(e=>{e.forEach(e=>{t.test(e.post)&&(e.post=" ")})}),this},toQuotations:function(t,e){return t=t||'"',e=e||'"',this.docs.forEach(r=>{r[0].pre=t+r[0].pre;let n=r[r.length-1];n.post=e+n.post}),this},toParentheses:function(t,e){return t=t||"(",e=e||")",this.docs.forEach(r=>{r[0].pre=t+r[0].pre;let n=r[r.length-1];n.post=e+n.post}),this}};I.deHyphenate=I.dehyphenate,I.toQuotation=I.toQuotations;const K=Object.assign({},H,{toLowerCase:function(){return this.termList().forEach(t=>{t.text=t.text.toLowerCase()}),this},toUpperCase:function(){return this.termList().forEach(t=>{t.text=t.text.toUpperCase()}),this},toTitleCase:function(){return this.termList().forEach(t=>{t.text=t.text.replace(/^ *[a-z\u00C0-\u00FF]/,t=>t.toUpperCase())}),this},toCamelCase:function(){return this.docs.forEach(t=>{t.forEach((e,r)=>{0!==r&&(e.text=e.text.replace(/^ *[a-z\u00C0-\u00FF]/,t=>t.toUpperCase())),r!==t.length-1&&(e.post="")})}),this}},u,l,m,d,v,F,q,G,T,Z,Q,V,I);K.get=K.eq,K.lookBehind=K.before,K.lookAhead=K.after,K.notIf=K.ifNo;class R{constructor(e,r,n={}){Object.defineProperty(this,"document",{value:e,writable:!0}),Object.defineProperty(this,"world",{value:t,writable:!0}),Object.defineProperty(this,"_groups",{value:n,writable:!0}),Object.defineProperty(this,"_cache",{value:null,writable:!0}),this.ptrs=r}get docs(){let e=this.document;return this.pointer&&(e=t.methods.one.getDoc(this.pointer,this.document)),e}get pointer(){return this.ptrs}get methods(){return this.world.methods}get model(){return this.world.model}get hooks(){return this.world.hooks}get isView(){return!0}get found(){return this.docs.length>0}get length(){return this.docs.length}get fullPointer(){let{docs:t,pointer:e,document:r}=this;return(e||t.map((t,e)=>[e])).map((t,e)=>((t=t.slice(0))[1]=t[1]||0,t[2]=t[2]||(r[e]||[]).length,t))}update(t){let e=new R(this.document,t);return e._cache=this._cache,e}clone(){let t=this.document.slice(0);return t=t.map(t=>t.map(t=>((t=Object.assign({},t)).tags=new Set(t.tags),t))),new R(t,this.pointer)}}Object.assign(R.prototype,K);const J=function(t){return t&&"object"==typeof t&&!Array.isArray(t)};function X(t,e){if(J(e))for(const r in e)J(e[r])?(t[r]||Object.assign(t,{[r]:{}}),X(t[r],e[r])):Object.assign(t,{[r]:e[r]});return t}const Y=function(e,r){const{methods:n,hooks:o}=t;r&&Y.addWords(r);let i=n.one.tokenize(e,t),s=new R(i);return s.compute(o),s};Y.verbose=function(t){let e=void 0===typeof process?self.env:process.env;return e.DEBUG_TAGS="tagger"===t||!0===t||"",e.DEBUG_MATCH="match"===t||!0===t||"",e.DEBUG_CHUNKS="chunker"===t||!0===t||"",this},Y.parseMatch=function(e){return t.methods.one.parseMatch(e)},Y.plugin=function(e){return function(t,e,r){const{methods:n,model:o,compute:i,hooks:s}=e;X(i,t.compute),X(n,t.methods),X(o,t.model),s&&(e.hooks=s.concat(t.hooks||[])),t.api&&t.api(r)}(e,t,R),this},Y.extend=Y.plugin,Y.world=()=>t,Y.version="14rc",Y.addWords=function(e){const{methods:r,model:n}=t;if(e)if(r.two.expandLexicon){let{lex:o,_multi:i}=r.two.expandLexicon(e,t);Object.assign(n.two.lexicon,o),Object.assign(n.two._multiCache,i)}else Object.assign(n.two.lexicon,e)},Y.tokenize=function(e,r){const{methods:n,compute:o}=t;r&&Y.addWords(r);let i=n.one.tokenize(e,t),s=new R(i);return o.contractions&&s.compute("contractions"),s},Y.model=()=>t.model,Y.methods=()=>t.methods,Y.hooks=()=>t.hooks;const tt=/ /,et=function(t,e,r,n){if(!0===t.tags.has(e))return null;if("."===e)return null;let o=r[e];if(o){if(o.not&&o.not.length>0)for(let e=0;e<o.not.length;e+=1){if(!0===n&&t.tags.has(o.not[e]))return null;t.tags.delete(o.not[e])}if(o.parents&&o.parents.length>0)for(let e=0;e<o.parents.length;e+=1)t.tags.add(o.parents[e])}return t.tags.add(e),!0},rt=function(t,e,r={},n){const o=r.model.two.tagSet||{};var i;if(!0!=(i=e,"[object Array]"===Object.prototype.toString.call(i)))if(e=e.trim(),tt.test(e))!function(t,e,r,n){let o=e.split(tt);t.forEach((t,e)=>{let i=o[e];i&&(i=i.replace(/^#/,""),et(t,i,r,n))})}(t,e,o,n);else{e=e.replace(/^#/,"");for(let r=0;r<t.length;r+=1)et(t[r],e,o,n)}else e.forEach(e=>rt(t,e,r,n))},nt=function(t,e){for(let r of e)if(t.has(r))return!0;return!1},ot=function(t,e){for(let r=0;r<t.length;r+=1){let n=t[r];if(!0!==n.optional&&!0!==n.negation){if(void 0!==n.word&&!1===e.has(n.word))return!0;if(void 0!==n.tag&&!1===e.has("#"+n.tag))return!0;if(n.fastOr&&!1===nt(n.fastOr,e))return!1}}return!1},it=function(t,e,r=3){if(t===e)return 1;if(t.length<r||e.length<r)return 0;const n=function(t,e){let r=t.length,n=e.length;if(0===r)return n;if(0===n)return r;let o=(n>r?n:r)+1;if(Math.abs(r-n)>(o||100))return o||100;let i,s,u,l,a,c,h=[];for(let t=0;t<o;t++)h[t]=[t],h[t].length=o;for(let t=0;t<o;t++)h[0][t]=t;for(let o=1;o<=r;++o)for(s=t[o-1],i=1;i<=n;++i){if(o===i&&h[o][i]>4)return r;u=e[i-1],l=s===u?0:1,a=h[o-1][i]+1,(c=h[o][i-1]+1)<a&&(a=c),(c=h[o-1][i-1]+l)<a&&(a=c);let n=o>1&&i>1&&s===e[i-2]&&t[o-2]===u&&(c=h[o-2][i-2]+l)<a;h[o][i]=n?c:a}return h[r][n]}(t,e);let o=Math.max(t.length,e.length);return 1-(0===o?0:n/o)},st=/([\u0022\uFF02\u0027\u201C\u2018\u201F\u201B\u201E\u2E42\u201A\u00AB\u2039\u2035\u2036\u2037\u301D\u0060\u301F])/,ut=/([\u0022\uFF02\u0027\u201D\u2019\u00BB\u203A\u2032\u2033\u2034\u301E\u00B4])/;let lt={};const at=function(t,e){return-1!==t.post.indexOf(e)},ct=function(t,e){return-1!==t.pre.indexOf(e)};lt.hasQuote=function(t){return st.test(t.pre)||ut.test(t.post)},lt.hasQuotation=lt.hasQuote,lt.hasComma=function(t){return at(t,",")},lt.hasPeriod=function(t){return!0===at(t,".")&&!1===at(t,"...")},lt.hasExclamation=function(t){return at(t,"!")},lt.hasQuestionMark=function(t){return at(t,"?")||at(t,"¿")},lt.hasEllipses=function(t){return at(t,"..")||at(t,"…")||ct(t,"..")||ct(t,"…")},lt.hasSemicolon=function(t){return at(t,";")},lt.hasSlash=function(t){return/\//.test(t.text)},lt.hasHyphen=function(t){const e=/^[-–—]$/;return e.test(t.post)||e.test(t.pre)},lt.hasDash=function(t){const e=/ [-–—] /;return e.test(t.post)||e.test(t.pre)},lt.hasContraction=function(t){return Boolean(t.implicit)},lt.isAcronym=function(t){return t.tags.has("Acronym")},lt.isKnown=function(t){return t.tags.size>0},lt.isTitleCase=function(t){return/^[A-Z][a-z'\u00C0-\u00FF]/.test(t.text)};let ht=function(){};ht=function(t,e,r,n){let o=function(t,e,r,n){if(!0===e.anything)return!0;if(!0===e.start&&0!==r)return!1;if(!0===e.end&&r!==n-1)return!1;if(void 0!==e.word){if(null!==t.machine&&t.machine===e.word)return!0;if(void 0!==t.alias&&t.alias.hasOwnProperty(e.word))return!0;if(!0===e.soft&&e.word===t.root)return!0;if(void 0!==e.fuzzy){let r=it(e.word,t.normal);if(r>e.fuzzy)return!0;if(!0===e.soft&&(r=it(e.word,t.root),r>e.fuzzy))return!0}return!(!t.alias||!t.alias.some(t=>t===e.word))||e.word===t.text||e.word===t.normal}return void 0!==e.tag?!0===t.tags.has(e.tag):void 0!==e.method?"function"==typeof lt[e.method]&&!0===lt[e.method](t):void 0!==e.regex?e.regex.test(t.normal):void 0!==e.chunk?t.chunk===e.chunk:void 0!==e.fastOr?!(!t.implicit||!0!==e.fastOr.has(t.implicit))||e.fastOr.has(t.normal)||e.fastOr.has(t.text):void 0!==e.choices&&("and"===e.operator?e.choices.every(e=>ht(t,e,r,n)):e.choices.some(e=>ht(t,e,r,n)))}(t,e,r,n);return!0===e.negative?!o:o};var ft=ht;const pt=void 0===typeof process?self.env:process.env,gt=t=>{pt.DEBUG_MATCH&&console.log(`\n  [32m ${t} [0m`)},mt=function(t,e){let r=Object.assign({},t.regs[t.r],{start:!1,end:!1}),n=t.t;for(;t.t<t.terms.length;t.t+=1){if(e&&ft(t.terms[t.t],e,t.start_i+t.t,t.phrase_length))return t.t;let o=t.t-n+1;if(void 0!==r.max&&o===r.max)return t.t;if(!1===ft(t.terms[t.t],r,t.start_i+t.t,t.phrase_length))return void 0!==r.min&&o<r.min?null:t.t}return t.t},dt=function(t,e){let r=t.t;if(!e)return t.terms.length;for(;r<t.terms.length;r+=1)if(!0===ft(t.terms[r],e,t.start_i+r,t.phrase_length))return gt("greedyTo "+t.terms[r].normal),r;return null},bt=function(t,e){if(!0===t.end&&!0===t.greedy&&e.start_i+e.t<e.phrase_length-1){let r=Object.assign({},t,{end:!1});if(!0===ft(e.terms[e.t],r,e.start_i+e.t,e.phrase_length))return gt("endGreedy "+e.terms[e.t].normal),!0}return!1},yt=function(t,e=0){let r=t.regs[t.r],n=!1;for(let o=0;o<r.choices.length;o+=1){let i=r.choices[o];if(n=i.every((r,n)=>{let o=0,i=t.t+n+e+o;if(void 0===t.terms[i])return!1;let s=ft(t.terms[i],r,i+t.start_i,t.phrase_length);if(!0===s&&!0===r.greedy)for(let e=1;e<t.terms.length;e+=1){let n=t.terms[i+e];if(n){if(!0!==ft(n,r,t.start_i+e,t.phrase_length))break;o+=1}}return e+=o,s}),n){e+=i.length;break}}return n&&!0===r.greedy?yt(t,e):e},wt=function(t){let e=0;return!0===t.regs[t.r].choices.every(r=>{let n=r.every((e,r)=>{let n=t.t+r;return void 0!==t.terms[n]&&ft(t.terms[n],e,n,t.phrase_length)});return!0===n&&r.length>e&&(e=r.length),n})&&(gt("doAndBlock "+t.terms[t.t].normal),e)},vt=function(t,e){return t.groups[t.inGroup]||(t.groups[t.inGroup]={start:e,length:0}),t.groups[t.inGroup]},Et=function(t,e,r,n){if(0===t.length||0===e.length)return null;let o={t:0,terms:t,r:0,regs:e,groups:{},start_i:r,phrase_length:n,inGroup:null};for(;o.r<e.length;o.r+=1){let t=e[o.r];if(o.hasGroup=Boolean(t.group),!0===o.hasGroup?o.inGroup=t.group:o.inGroup=null,!o.terms[o.t]){if(!1===e.slice(o.r).some(t=>!t.optional))break;return null}if(!0===t.anything&&!0===t.greedy){let r=dt(o,e[o.r+1]);if(null===r||0===r)return null;if(void 0!==t.min&&r-o.t<t.min)return null;if(void 0!==t.max&&r-o.t>t.max){o.t=o.t+t.max;continue}if(!0===o.hasGroup){vt(o,o.t).length=r-o.t}o.t=r;continue}if(void 0!==t.choices&&"or"===t.operator){let e=yt(o);if(e){if(!0===t.negative)return null;if(!0===o.hasGroup){vt(o,o.t).length+=e}if(!0===t.end){let t=o.phrase_length-1;if(o.t+o.start_i!==t)return null}o.t+=e;continue}if(!t.optional)return null}if(void 0!==t.choices&&"and"===t.operator){let e=wt(o);if(e){if(!0===t.negative)return null;if(!0===o.hasGroup){vt(o,o.t).length+=e}if(!0===t.end){let t=o.phrase_length-1;if(o.t+o.start_i!==t)return null}o.t+=e;continue}if(!t.optional)return null}let r=o.terms[o.t],i=ft(r,t,o.start_i+o.t,o.phrase_length);if(!0===t.anything||!0===i||bt(t,o)){let i=o.t;if(t.optional&&e[o.r+1]&&t.negative)continue;if(t.optional&&e[o.r+1]){let n=ft(r,e[o.r+1],o.start_i+o.t,o.phrase_length);if(t.negative||n){let t=o.terms[o.t+1];t&&ft(t,e[o.r+1],o.start_i+o.t,o.phrase_length)||(o.r+=1)}}if(o.t+=1,!0===t.end&&o.t!==o.terms.length&&!0!==t.greedy)return null;if(!0===t.greedy){if(o.t=mt(o,e[o.r+1]),null===o.t)return null;if(t.min&&t.min>o.t)return null;if(!0===t.end&&o.start_i+o.t!==n)return null}if(!0===o.hasGroup){const e=vt(o,i);o.t>1&&t.greedy?e.length+=o.t-i:e.length++}}else{if(t.negative){let e=Object.assign({},t);if(e.negative=!1,!0===ft(o.terms[o.t],e,o.start_i+o.t,o.phrase_length))return null}if(!0!==t.optional){if(Boolean(o.terms[o.t].implicit)&&e[o.r-1]&&o.terms[o.t+1]){if(o.terms[o.t-1]&&o.terms[o.t-1].implicit===e[o.r-1].word)return null;if(ft(o.terms[o.t+1],t,o.start_i+o.t,o.phrase_length)){o.t+=2;continue}}return null}}}let i=[null,r,o.t+r];if(i[1]===i[2])return null;let s={};return Object.keys(o.groups).forEach(t=>{let e=o.groups[t],n=r+e.start;s[t]=[null,n,n+e.length]}),{pointer:i,groups:s}},xt=function(t,e){return t.pointer[0]=e,Object.keys(t.groups).forEach(r=>{t.groups[r][0]=e}),t},jt=function(t,e,r){let n=Et(t,e,0,t.length);return n?(n=xt(n,r),n):null},kt=/(?:^|\s)([![^]*(?:<[^<]*>)?\/.*?[^\\/]\/[?\]+*$~]*)(?:\s|$)/,Pt=/([![^]*(?:<[^<]*>)?\([^)]+[^\\)]\)[?\]+*$~]*)(?:\s|$)/,Ot=/ /g,zt=t=>/^[![^]*(<[^<]*>)?\//.test(t)&&/\/[?\]+*$~]*$/.test(t),_t=function(t){return t=(t=t.map(t=>t.trim())).filter(t=>t)},$t=/\{([0-9]+)(, *[0-9]*)?\}/,At=/&&/,St=new RegExp(/^<\s*(\S+)\s*>/),Ct=function(t){return t[t.length-1]},Ft=function(t){return t[0]},qt=function(t){return t.substr(1)},Bt=function(t){return t.substr(0,t.length-1)},Gt=function(t){return t=qt(t),t=Bt(t)},Dt=function(t){let e={};for(let r=0;r<2;r+=1){if("$"===Ct(t)&&(e.end=!0,t=Bt(t)),"^"===Ft(t)&&(e.start=!0,t=qt(t)),("["===Ft(t)||"]"===Ct(t))&&(e.group=null,"["===Ft(t)&&(e.groupStart=!0),"]"===Ct(t)&&(e.groupEnd=!0),t=(t=t.replace(/^\[/,"")).replace(/\]$/,""),"<"===Ft(t))){const r=St.exec(t);r.length>=2&&(e.group=r[1],t=t.replace(r[0],""))}if("+"===Ct(t)&&(e.greedy=!0,t=Bt(t)),"*"!==t&&"*"===Ct(t)&&"\\*"!==t&&(e.greedy=!0,t=Bt(t)),"?"===Ct(t)&&(e.optional=!0,t=Bt(t)),"!"===Ft(t)&&(e.negative=!0,t=qt(t)),"("===Ft(t)&&")"===Ct(t)){At.test(t)?(e.choices=t.split(At),e.operator="and"):(e.choices=t.split("|"),e.operator="or"),e.choices[0]=qt(e.choices[0]);let r=e.choices.length-1;e.choices[r]=Bt(e.choices[r]),e.choices=e.choices.map(t=>t.trim()),e.choices=e.choices.filter(t=>t),e.choices=e.choices.map(t=>t.split(/ /g).map(Dt)),t=""}if("/"===Ft(t)&&"/"===Ct(t))return t=Gt(t),e.regex=new RegExp(t),e;if("~"===Ft(t)&&"~"===Ct(t))return t=Gt(t),e.soft=!0,e.word=t,e;if("{"===Ft(t)&&"}"===Ct(t))return t=Gt(t),e.chunk=t,e.greedy=!0,e}return!0===$t.test(t)&&(t=t.replace($t,(t,r,n)=>(void 0===n?(e.min=Number(r),e.max=Number(r)):(n=n.replace(/, */,""),e.min=Number(r),e.max=Number(n||999)),e.greedy=!0,e.optional=!0,""))),"#"===Ft(t)?(e.tag=qt(t),e.tag=(r=e.tag).charAt(0).toUpperCase()+r.substr(1),e):"@"===Ft(t)?(e.method=qt(t),e):"."===t?(e.anything=!0,e):"*"===t?(e.anything=!0,e.greedy=!0,e.optional=!0,e):(t&&(t=(t=t.replace("\\*","*")).replace("\\.","."),e.word=t.toLowerCase()),e);var r},Mt=function(t,e={}){return t=function(t){let e=0,r=null;for(let n=0;n<t.length;n++){const o=t[n];!0===o.groupStart&&(r=o.group,null===r&&(r=String(e),e+=1)),null!==r&&(o.group=r),!0===o.groupEnd&&(r=null)}return t}(t),e.fuzzy||(t=t.map(t=>{if(void 0!==t.choices){if("or"!==t.operator)return t;!0===t.choices.every(t=>{if(1!==t.length)return!1;let e=t[0];return!e.start&&!e.end&&void 0!==e.word&&!0!==e.negative&&!0!==e.optional&&!0!==e.method})&&(t.fastOr=new Set,t.choices.forEach(e=>{t.fastOr.add(e[0].word)}),delete t.choices)}return t})),t};var Lt={methods:{one:{termList:function(t){let e=[];for(let r=0;r<t.length;r+=1)for(let n=0;n<t[r].length;n+=1)e.push(t[r][n]);return e},getDoc:function(t,e){let r=[];return t.forEach(t=>{if(!t)return;let[n,o,i]=t,s=e[n]||[];void 0===o&&(o=0),void 0===i&&(i=s.length),s=s.slice(o,i),s.length>0&&r.push(s)}),r},setTag:rt,unTag:function(t,e,r){e=e.trim().replace(/^#/,"");for(let n=0;n<t.length;n+=1){let o=t[n];if("*"===e){o.tags.clear();continue}let i=r[e];if(i&&i.children.length>0)for(let t=0;t<i.children.length;t+=1)o.tags.delete(i.children[t]);o.tags.delete(e)}},cacheDoc:function(t){return t.map(t=>{let e=new Set;return t.forEach(t=>{""!==t.normal&&e.add(t.normal),t.implicit&&e.add(t.implicit);let r=Array.from(t.tags);for(let t=0;t<r.length;t+=1)e.add("#"+r[t])}),e})},cacheMatch:function(t){let e=new Set;return t.forEach(t=>{!0!==t.optional&&!0!==t.negative&&(t.tag&&e.add("#"+t.tag),t.word&&e.add(t.word))}),e},parseMatch:function(t,e={}){if(null==t||""===t)return[];"number"==typeof t&&(t=String(t));let r=function(t){let e=t.split(kt),r=[];e.forEach(t=>{zt(t)?r.push(t):r=r.concat(t.split(Pt))}),r=_t(r);let n=[];return r.forEach(t=>{(t=>/^[![^]*(<[^<]*>)?\(/.test(t)&&/\)[?\]+*$~]*$/.test(t))(t)||zt(t)?n.push(t):n=n.concat(t.split(Ot))}),n=_t(n),n}(t);return r=r.map(t=>Dt(t)),r=Mt(r,e),r=function(t,e){return!0===e.fuzzy&&(e.fuzzy=.85),"number"==typeof e.fuzzy&&(t=t.map(t=>(e.fuzzy>0&&t.word&&(t.fuzzy=e.fuzzy),t.choices&&t.choices.forEach(t=>{t.forEach(t=>{t.fuzzy=e.fuzzy})}),t))),t}(r,e),r},match:function(t,e,r){r=r||[];let{regs:n,group:o,justOne:i}=e,s=[];if(!n||0===n.length)return{ptrs:[],byGroup:{}};const u=n.filter(t=>!0!==t.optional&&!0!==t.negative).length;t:for(let e=0;e<t.length;e+=1){let o=t[e];if(!r[e]||!ot(n,r[e]))if(!0!==n[0].start)for(let t=0;t<o.length;t+=1){let r=o.slice(t);if(r.length<u)break;let l=Et(r,n,t,o.length);if(l){if(l=xt(l,e),s.push(l),!0===i)break t;let r=l.pointer[2];Math.abs(r-1)>t&&(t=Math.abs(r-1))}}else{let t=jt(o,n,e);t&&s.push(t)}}return!0===n[n.length-1].end&&(s=s.filter(e=>{let r=e.pointer[0];return t[r].length===e.pointer[2]})),s=function(t,e){let r=[],n={};return 0===t.length||("number"==typeof e&&(e=String(e)),e?t.forEach(t=>{t.groups[e]&&r.push(t.groups[e])}):t.forEach(t=>{r.push(t.pointer),Object.keys(t.groups).forEach(e=>{n[e]=n[e]||[],n[e].push(t.groups[e])})})),{ptrs:r,byGroup:n}}(s,o),s}}}};const Tt=/(\S.+?[.!?\u203D\u2E18\u203C\u2047-\u2049])(?=\s|$)/g,Ut=/((?:\r?\n|\r)+)/,Nt=/[ .][A-Z]\.? *$/i,Zt=/(?:\u2026|\.{2,}) *$/,Wt=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i,Qt=function(t,e){if(!1===Wt.test(t))return!1;if(!0===Nt.test(t))return!1;if(!0===Zt.test(t))return!1;let r=t.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),n=r[r.length-1].toLowerCase();return!0!==e.hasOwnProperty(n)},Ht=/\S/,Vt=/^\s+/,It=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i,Kt=function(t){if(!0===/^(re|un|micro|macro|trans|bi|mono|over)-?[^aeiou]./.test(t))return!1;if(!0===/^([a-z\u00C0-\u00FF/]+)[-–—](like|ish|less|able)/i.test(t))return!1;if(!0===/^([a-z\u00C0-\u00FF`"'/]+)[-–—]([a-z0-9\u00C0-\u00FF].*)/i.test(t))return!0;return!0===/^([0-9]{1,4})[-–—]([a-z\u00C0-\u00FF`"'/-]+$)/i.test(t)},Rt=function(t){let e=[];const r=t.split(/[-–—]/);let n="-",o=t.match(/[-–—]/);o&&o[0]&&(n=o);for(let t=0;t<r.length;t++)t===r.length-1?e.push(r[t]):e.push(r[t]+n);return e},Jt=/[a-z] ?\/ ?[a-z]+$/,Xt=/\S/,Yt=/^[!?.]+$/,te=/(\S+)/;let ee=[".","?","!",":",";","-","–","—","--","...","(",")","[","]",'"',"'","`"];ee=ee.reduce((t,e)=>(t[e]=!0,t),{});const re=/^[ \n\t.[\](){}⟨⟩:,،、‒–—―…!‹›«»‐\-?‘’;/⁄·&*•^†‡°¡¿※№÷×ºª%‰+−=‱¶′″‴§~|‖¦©℗®℠™¤₳฿\u0022\uFF02\u0027\u201C\u201F\u201B\u201E\u2E42\u201A\u2035\u2036\u2037\u301D\u0060\u301F]+/,ne=/[ \n\t.'[\](){}⟨⟩:,،、‒–—―…!‹›«»‐\-?‘’;/⁄·&*@•^†‡°¡¿※#№÷×ºª‰+−=‱¶′″‴§~|‖¦©℗®℠™¤₳฿\u0022\uFF02\u201D\u00B4\u301E]+$/,oe=/['’]/,ie=/^[a-z]\.([a-z]\.)+/i,se=/^[-+.][0-9]/,ue=/^'[0-9]{2}/;var le={one:{splitSentences:function(t,e){let r=e.one.abbreviations||new Set;t=t||"";let n=[],o=[];if(!(t=String(t))||"string"!=typeof t||!1===Ht.test(t))return n;let i=function(t){let e=[],r=t.split(Ut);for(let t=0;t<r.length;t++){let n=r[t].split(Tt);for(let t=0;t<n.length;t++)e.push(n[t])}return e}(t=t.replace(" "," "));for(let t=0;t<i.length;t++){let e=i[t];if(void 0!==e&&""!==e){if(!1===Ht.test(e)||!1===It.test(e)){if(o[o.length-1]){o[o.length-1]+=e;continue}if(i[t+1]){i[t+1]=e+i[t+1];continue}}o.push(e)}}for(let t=0;t<o.length;t++){let e=o[t];o[t+1]&&!1===Qt(e,r)?o[t+1]=e+(o[t+1]||""):e&&e.length>0&&(n.push(e),o[t]="")}if(0===n.length)return[t];for(let t=1;t<n.length;t+=1){let e=n[t].match(Vt);null!==e&&(n[t-1]+=e[0],n[t]=n[t].replace(Vt,""))}return n},splitTerms:function(t){let e=[],r=[];if("number"==typeof(t=t||"")&&(t=String(t)),function(t){return"[object Array]"===Object.prototype.toString.call(t)}(t))return t;const n=t.split(te);for(let t=0;t<n.length;t++)!0!==Kt(n[t])?r.push(n[t]):r=r.concat(Rt(n[t]));let o="";for(let t=0;t<r.length;t++){let n=r[t];!0===Xt.test(n)&&!1===ee.hasOwnProperty(n)&&!1===Yt.test(n)?(e.length>0?(e[e.length-1]+=o,e.push(n)):e.push(o+n),o=""):o+=n}return o&&(0===e.length&&(e[0]=""),e[e.length-1]+=o),e=function(t){for(let e=1;e<t.length-1;e++)Jt.test(t[e])&&(t[e-1]+=t[e]+t[e+1],t[e]=null,t[e+1]=null);return t}(e),e=function(t){const e=/^[0-9]{1,4}(:[0-9][0-9])?([a-z]{1,2})? ?[-–—] ?$/,r=/^[0-9]{1,4}([a-z]{1,2})? ?$/;for(let n=0;n<t.length-1;n+=1)t[n+1]&&e.test(t[n])&&r.test(t[n+1])&&(t[n]=t[n]+t[n+1],t[n+1]=null);return t}(e),e=e.filter(t=>t),e},splitWhitespace:t=>{let{str:e,pre:r,post:n}=function(t){let e=t,r="",n="";return""===(t=(t=t.replace(re,e=>(r=e,"-"!==r&&"+"!==r&&"."!==r||!se.test(t)?"'"===r&&ue.test(t)?(r="",e):"":(r="",e)))).replace(ne,o=>(n=o,oe.test(o)&&/[sn]['’]$/.test(e)&&!1===oe.test(r)?(n=n.replace(oe,""),"'"):!0===ie.test(t)?(n=n.replace(/\./,""),"."):"")))&&(e=e.replace(/ *$/,t=>(n=t||"","")),t=e,r=""),{str:t,pre:r,post:n}}(t);return{text:e,pre:r,post:n,tags:new Set}},tokenize:function(t,e){const{methods:r,model:n,compute:o}=e,{splitSentences:i,splitTerms:s,splitWhitespace:u}=r.one;if("number"==typeof(t=t||"")&&(t=String(t)),"string"==typeof t){t=i(t,n).map(t=>s(t).map(u)),o.normal(t),o.alias(t,e)}return t}}};let ae={},ce={};[[["approx","apt","bc","cyn","eg","esp","est","etc","ex","exp","prob","pron","gal","min","pseud","fig","jd","lat","lng","vol","fm","def","misc","plz","ea","ps","sec","pt","pref","pl","pp","qt","fr","sq","nee","ss","tel","temp","vet","ver","fem","masc","eng","adj","vb","rb","inf","situ","vivo","vitro","wr"]],[["dl","ml","gal","ft","qt","pt","tbl","tsp","tbsp","km","dm","cm","mm","mi","td","hr","hrs","kg","hg","dg","cg","mg","µg","lb","oz","sq ft","hz","mps","mph","kmph","kb","mb","gb","tb","lx","lm","pa","fl oz","yb"],"Unit"],[["ad","al","arc","ba","bl","ca","cca","col","corp","ft","fy","ie","lit","ma","md","pd","tce"],"Noun"],[["adj","adm","adv","asst","atty","bldg","brig","capt","cmdr","comdr","cpl","det","dr","esq","gen","gov","hon","jr","llb","lt","maj","messrs","mister","mlle","mme","mr","mrs","ms","mstr","phd","prof","pvt","rep","reps","res","rev","sen","sens","sfc","sgt","sir","sr","supt","surg"],"Honorific"],[["jan","feb","mar","apr","jun","jul","aug","sep","sept","oct","nov","dec"],"Month"],[["dept","univ","assn","bros","inc","ltd","co"],"Organization"],[["rd","st","dist","mt","ave","blvd","cl","cres","hwy","ariz","cal","calif","colo","conn","fla","fl","ga","ida","ia","kan","kans","minn","neb","nebr","okla","penna","penn","pa","dak","tenn","tex","ut","vt","va","wis","wisc","wy","wyo","usafa","alta","ont","que","sask"],"Place"]].forEach(t=>{t[0].forEach(e=>{ae[e]=!0,ce[e]="Abbreviation",void 0!==t[1]&&(ce[e]=[ce[e],t[1]])})});var he={one:{aliases:{"&":"and","@":"at","%":"percent"},abbreviations:ae},two:{lexicon:ce}};const fe=/\//,pe=function(t,e){let r=t.normal||t.text;const n=e.model.one.aliases;return n.hasOwnProperty(r)&&(t.alias=t.alias||[],t.alias.push(n[r])),fe.test(r)&&r.split(fe).forEach(e=>{""!==(e=e.trim())&&(t.alias=t.alias||[],t.alias.push(e))}),t};let ge={"!":"¡","?":"¿Ɂ",'"':'“”"❝❞',"'":"‘‛❛❜","-":"—–",a:"ªÀÁÂÃÄÅàáâãäåĀāĂăĄąǍǎǞǟǠǡǺǻȀȁȂȃȦȧȺΆΑΔΛάαλАаѦѧӐӑӒӓƛæ",b:"ßþƀƁƂƃƄƅɃΒβϐϦБВЪЬвъьѢѣҌҍ",c:"¢©ÇçĆćĈĉĊċČčƆƇƈȻȼͻͼϲϹϽϾСсєҀҁҪҫ",d:"ÐĎďĐđƉƊȡƋƌ",e:"ÈÉÊËèéêëĒēĔĕĖėĘęĚěƐȄȅȆȇȨȩɆɇΈΕΞΣέεξϵЀЁЕеѐёҼҽҾҿӖӗ",f:"ƑƒϜϝӺӻҒғſ",g:"ĜĝĞğĠġĢģƓǤǥǦǧǴǵ",h:"ĤĥĦħƕǶȞȟΉΗЂЊЋНнђћҢңҤҥҺһӉӊ",I:"ÌÍÎÏ",i:"ìíîïĨĩĪīĬĭĮįİıƖƗȈȉȊȋΊΐΪίιϊІЇії",j:"ĴĵǰȷɈɉϳЈј",k:"ĶķĸƘƙǨǩΚκЌЖКжкќҚқҜҝҞҟҠҡ",l:"ĹĺĻļĽľĿŀŁłƚƪǀǏǐȴȽΙӀӏ",m:"ΜϺϻМмӍӎ",n:"ÑñŃńŅņŇňŉŊŋƝƞǸǹȠȵΝΠήηϞЍИЙЛПийлпѝҊҋӅӆӢӣӤӥπ",o:"ÒÓÔÕÖØðòóôõöøŌōŎŏŐőƟƠơǑǒǪǫǬǭǾǿȌȍȎȏȪȫȬȭȮȯȰȱΌΘΟθοσόϕϘϙϬϴОФоѲѳӦӧӨөӪӫ",p:"ƤΡρϷϸϼРрҎҏÞ",q:"Ɋɋ",r:"ŔŕŖŗŘřƦȐȑȒȓɌɍЃГЯгяѓҐґ",s:"ŚśŜŝŞşŠšƧƨȘșȿЅѕ",t:"ŢţŤťŦŧƫƬƭƮȚțȶȾΓΤτϮТт",u:"µÙÚÛÜùúûüŨũŪūŬŭŮůŰűŲųƯưƱƲǓǔǕǖǗǘǙǚǛǜȔȕȖȗɄΰμυϋύ",v:"νѴѵѶѷ",w:"ŴŵƜωώϖϢϣШЩшщѡѿ",x:"×ΧχϗϰХхҲҳӼӽӾӿ",y:"ÝýÿŶŷŸƳƴȲȳɎɏΎΥΫγψϒϓϔЎУучўѰѱҮүҰұӮӯӰӱӲӳ",z:"ŹźŻżŽžƵƶȤȥɀΖ"},me={};Object.keys(ge).forEach((function(t){ge[t].split("").forEach((function(e){me[e]=t}))}));const de=/([A-Z]\.)+[A-Z]?,?$/,be=/^[A-Z]\.,?$/,ye=/[A-Z]{2,}('s|,)?$/,we=/([a-z]\.)+[a-z]\.?$/,ve=function(t){return function(t){return!0===de.test(t)||!0===we.test(t)||!0===be.test(t)||!0===ye.test(t)}(t)&&(t=t.replace(/\./g,"")),t},Ee=function(t){let e=t.text||"";e=function(t){let e=t=(t=(t=t||"").toLowerCase()).trim();return t=(t=(t=(t=(t=t.replace(/[,;.!?]+$/,"")).replace(/[\u0027\u0060\u00B4\u2018\u2019\u201A\u201B\u2032\u2035\u2039\u203A]+/g,"'")).replace(/[\u0022\u00AB\u00BB\u201C\u201D\u201E\u201F\u2033\u2034\u2036\u2037\u2E42\u301D\u301E\u301F\uFF02]+/g,'"')).replace(/\u2026/g,"...")).replace(/\u2013/g,"-"),!1===/^[:;]/.test(t)&&(t=(t=(t=t.replace(/\.{3,}$/g,"")).replace(/[",.!:;?)]+$/g,"")).replace(/^['"(]+/g,"")),""===(t=(t=t.replace(/[\u200B-\u200D\uFEFF]/g,"")).trim())&&(t=e),t.replace(/([0-9]),([0-9])/g,"$1$2")}(e),e=(t=>{let e=t.split("");return e.forEach((t,r)=>{me[t]&&(e[r]=me[t])}),e.join("")})(e),e=ve(e),t.normal=e},xe=function(t){let e=t.implicit||t.normal||t.text;e=e.replace(/['’]s$/,""),e=e.replace(/s['’]$/,"s"),e=e.replace(/([aeiou][ktrp])in$/,"$1ing"),!0===/^(re|un)-?[^aeiou]./.test(e)&&(e=e.replace("-","")),e=e.replace(/^[#@]/,""),e!==t.normal&&(t.machine=e)},je=function(t,e,r){for(let n=0;n<t.length;n+=1)for(let o=0;o<t[n].length;o+=1)e(t[n][o],r)};var ke={compute:{alias:(t,e)=>je(t,pe,e),normal:(t,e)=>je(t,Ee,e),machine:(t,e)=>je(t,xe,e),freq:function(t){let e={};for(let r=0;r<t.length;r+=1)for(let n=0;n<t[r].length;n+=1){let o=t[r][n],i=o.machine||o.normal;e[i]=e[i]||0,e[i]+=1}for(let r=0;r<t.length;r+=1)for(let n=0;n<t[r].length;n+=1){let o=t[r][n],i=o.machine||o.normal;o.freq=e[i]}},offset:function(t){let e=0,r=0;for(let n=0;n<t.length;n+=1)for(let o=0;o<t[n].length;o+=1){let i=t[n][o];i.offset={index:r,start:e+i.pre.length,length:i.text.length},e+=i.pre.length+i.text.length+i.post.length,r+=1}},wordCount:function(t){let e=0;for(let r=0;r<t.length;r+=1)for(let n=0;n<t[r].length;n+=1)""!==t[r][n].normal&&(e+=1,t[r][n].wordCount=e)}},methods:le,model:he,hooks:["alias","normal","machine"]};Y.extend(Lt),Y.extend(ke);export{Y as default};
